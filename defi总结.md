AAVE是以ETH作为计价单位，而compound则是以USD作为计价单位。

1、传统金融行业的弊端？
- 交易慢：交易时间慢，主要在法律法规、汇率等方面
- 高成本：各个银行之间有协议，人民币到dollar，dollar到人民币，需要多次兑换
- 低获得性：获得账户麻烦，需要各种手续办理和信任
- 透明差：中心化不透明

2、DEFI的优势？
- 去中心化：不受任何一家银行的控制，可以自由选择
- 安全：不受任何一家银行的控制，不受任何监管
- 透明：所有交易都是公开透明的，可以随时查询到交易信息
- 低交易费：低交易费，几乎可以做到“零”成本

3、中心化程度？
- 中心化：Salt, BlockFi, Nexo, 和 Celsius
- 半去中心化：Compound、MakerDAO、dYdX
- 全去中心化：暂无

4、哪些defi类别？
- 稳定币：usdt（也即Tether是一种中心化的，法币抵押型稳定币）、usdc、usde、usds、bsc-usd、usdt0、dai（去中心化，加密货币作抵押的稳定币）
- 借贷抵押：aave、compound、makerdao
- 交易所：Coinbase、Binance、Kucoin、抹茶、uniswap
- 衍生品、基金管理、彩票、支付、保险：

5、makerdao？
- 抵押加密货币铸造dai，dai值1dollar，算法型稳定币；mkr是治理代币，有多少mkr，就有多少投票比重
- 三个关键参数：
  - 抵押率：抵押率为150%，150%的抵押率：铸造100美元的Dai，抵押价值至少为150美元的ETH或BAT
  - 稳定费：抵押借贷了dai，所需要的费率，一般是8%，存入maker平台中。支付dai或者mkr去还dai，以此来换回eth或者bat
  - 存款利率：拥有dai一段时间，所支付的利息，一般是8%.
  - 清算：当达到清算阈值时，抵押的eth或者bat会被拍卖还dai，然后一部分会成为清算罚款
- 存在的意义？
  - 你需要现金或者资金，用于其他投资；但是也看好eth要升值，而不是直接卖出去。
  - 出售eth或者其他加密货币是需要纳税的。
  - 你相信加密资产要升值，那么此时你现在用1个eth，铸造了3000个dai，因为3000个dai基本稳定值3000dollar，但是升值了后，可能值3100dollar了，
    那么你还的时候只需要还3000个dai左右。

6、Aave？
- 类似于Compound，但是多了利率转换、抵押品互换和闪电贷款。
- v1:贷款金额的0.00001%是在贷款发放时收取的；v3:0.09%的费用从闪电贷中收取
- 利率转换：
  - Aave的借款人可以在可变利率和稳定利率之间转换。
- 抵押品互换：
  - 借款人可以将他们的抵押品换成另一种资产。这有助于防止贷款低于最低抵押品比率而面临清算。
- 闪电贷款：
  - 如果借款人在同一笔交易中偿还了贷款和额外的利息和费用，借款人可以允许无抵押的贷款。闪电贷款对套利交易者很有用，因为他们
    在各种DeFi Dapps之间进行套利交易时具有资本效率。
    - 借入：
      - 你通过Aave的闪电贷，借出100万DAI（这通常需要你编写一个智能合约来自动执行所有步骤）。
    - 套利： 
      - 立刻用这100万DAI在DEX A上购买ETH。
      - 紧接着，将买到的所有ETH在DEX B上卖出，换回DAI。由于B的价格更高，你卖回的总金额会多于100万DAI，比如是1,020,000 DAI。
    - 还款：
      - 你立即向Aave偿还100万DAI的本金，并支付900 DAI的手续费（按0.09%计算）。
    - 利润：
      - 扣除所有费用后，这笔交易在几分钟内为你净赚的利润是：1,020,000 - 1,000,000 - 900 = 19,100 DAI
    - 如何实现呢？
      - 你把“借钱”、“用钱做操作”、“还钱”这三个步骤打包在同一个交易里，就是写在solidity代码中。

7、Compound？
- 借贷中心、提供资金赚取利息、抵押资产获得资金并支付债务利息
- 借款人支付的一部分利息将进入其储备金，作为保险，由COMP代币持有人控制。
- 抵押资产价值降低时，达到清算阈值，变卖资产还债并支付%5清算手续费
- 放贷人与借款人在协议上直接交易，无需知道对方是谁，在一个池子中进行交易，不是点对点交易
- 利息计算是按照区块数累积，而不是block.timestamp
- 存ETH，得到cETH；存DAI，得到cDAI
- 假设你在2019年1月1日给流动性池子供应了1,000个DAI。同时，2019整年的APY一直保持为10.00%。2020年1月1日，1年之后，你的1,000个cDAI将升值10%。
  DAI和cDAI间的新汇率为1:1.1。你的1000个cDAI现在可以兑换成1,100个DAI
- cToken同时也是ERC-20代币，意味着如果有人想接替你成为流动性提供者，那么你可以轻松地转移你提供的资产的“所有权”。

8、dYdX？
- 类似与Compound，但是多了保证金/杠杆交易平台；链下订单簿和链上结算方式；目前支持3种（eth、dai、usdc）可使用DAI或USDC进行高达5倍杠杆的ETH保证金交易。
- 放贷每秒产生利息，无需关注其他；1.25倍的初始抵押率/1.15倍的最低抵押率。
- 保证金和杠杠是咋回事呢？
  - 保证金1000dollar，杠杠最多加到5倍，就拿到了“借”的4000dollar
  - 拿着这5000dollar去进行交易
- 基于订单薄的方式（在不同价格水平上对某一特定资产的买入和卖出的订单列表）。

9、Uniswap？
- 流动性池 + amm自动做商
- 支付eth换取dai，支付eth换取usdt；支付等额的eth和dai给流动性池，得到一定的交易费。
- ETH 流动性(x) * DAI 流动性(y) = 恒定乘积(k)；100 * 20,000 = 2,000,000；用dai购买eth，需要出202.02个dai； 
  交易后剩下99个eth和20,202.02个dai，乘积约等于2,000,000。这就是amm
- ![集中.png](pic/%E9%9B%86%E4%B8%AD.png)因为是采用的恒定乘积，函数一条凹形图形，当交易时会有滑点，为了解决这种滑点，
  可以选择部分金额在凹形图形的一段。例如，ETH/DAI流动性池的LP可以选择将其30%的资金分配到2000-3000美元的价格范围，其余70%分配到1500-1700美元的价格范围。
- 多种类型的费用等级选择（不同流动性池交易波动小，费用等级低，反之等级高）
- 缺点/损失：
  - 交易时滑点损失
  - 三明治攻击
    - 先购买一笔交易（价格低）
    - 别人购买一笔交易（上涨了）
    - 此时卖出去（收益了一定的差价）
  - 移除流性无常损失
    - 在1ETH=4,000DAI时
      你在资金池中的持股量将是。
    - (3.536 ETH * 4,000 DAI) + 14,142 DAI = 28,286 DAI
    - 投资回报率=+41%(忽略交易费的收益)
      你在资金池外的持股量将是
    - (5 ETH * 4,000 DAI) + 10,000DAI = 30,000DAI
    - 投资回报率=+50%
      因此，你的无常损失是30,000 - 28,284=1,716 DAI
- 类似的swap，比如sushiswap（多种链）、pancakeswap（Binace链）、TerraSwap（Terra链）